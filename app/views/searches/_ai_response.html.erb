<% if @search.completed? && @ai_response_data %>
  <div class="bg-white rounded-lg shadow p-6 mb-6">
    <h3 class="text-xl font-semibold text-gray-900 mb-4">AI Response</h3>

    <% if @ai_response_data[:response].present? %>
      <div class="prose max-w-none mb-6">
        <%= simple_format(@ai_response_data[:response]) %>
      </div>

      <% if @ai_response_data[:follow_up_questions]&.any? %>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4">
          <h4 class="text-lg font-medium text-blue-900 mb-3">Follow-up Questions</h4>
          <ul class="space-y-2">
            <% @ai_response_data[:follow_up_questions].each do |question| %>
              <li class="text-blue-800">
                <span class="mr-2">ðŸ’¡</span>
                <%= question %>
              </li>
            <% end %>
          </ul>
        </div>
      <% end %>
    <% else %>
      <div class="text-gray-600 italic text-center py-8">
        ðŸ¤– AI response is being generated... Please check back in a moment.
      </div>
    <% end %>
  </div>
<% end %>
